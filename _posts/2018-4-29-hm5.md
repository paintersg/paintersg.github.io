---
layout: post
title: Homework 5
date: 2018-4-29 11:41:00+00:00
categories: 日志
tags: 博客
---

# 第五次作业

------

### a. 阅读 Asg_RH 文档，按用例构建领域模型。  

<img src="https://s14.postimg.cc/4zys176hd/model.png" width="100%" height="100%" />  


### b. 数据库建模(E-R 模型)  

<img src="https://s14.postimg.cc/7u1xeu3kh/database.png" width="100%" height="100%" />  
  
**Mysql 物理数据库的脚本**  
```sql
-- MySQL Script generated by MySQL Workbench
-- Sun Apr 29 18:03:54 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Customer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Customer` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `e-mail` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Hotel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Hotel` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `location` VARCHAR(45) NULL,
  `star-rating` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Reservation` (
  `id` INT NOT NULL,
  `checkInDate` DATETIME NULL,
  `checkOutDate` DATETIME NULL,
  `roomInfo` VARCHAR(50) NULL,
  `expense` DOUBLE NULL,
  `Customer_id` INT NOT NULL,
  `Hotel_id` INT NOT NULL,
  PRIMARY KEY (`id`, `Customer_id`, `Hotel_id`),
  INDEX `fk_Reservation_Customer1_idx` (`Customer_id` ASC),
  INDEX `fk_Reservation_Hotel1_idx` (`Hotel_id` ASC),
  CONSTRAINT `fk_Reservation_Customer1`
    FOREIGN KEY (`Customer_id`)
    REFERENCES `mydb`.`Customer` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Reservation_Hotel1`
    FOREIGN KEY (`Hotel_id`)
    REFERENCES `mydb`.`Hotel` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Room` (
  `id` INT NOT NULL,
  `type` VARCHAR(45) NULL,
  `pricePerDay` DOUBLE NULL,
  `isReserved` TINYINT NULL,
  `Reservation_id` INT NOT NULL,
  `Reservation_Customer_id` INT NOT NULL,
  `Hotel_id` INT NOT NULL,
  PRIMARY KEY (`id`, `Reservation_id`, `Reservation_Customer_id`, `Hotel_id`),
  INDEX `fk_Room_Reservation1_idx` (`Reservation_id` ASC, `Reservation_Customer_id` ASC),
  INDEX `fk_Room_Hotel1_idx` (`Hotel_id` ASC),
  CONSTRAINT `fk_Room_Reservation1`
    FOREIGN KEY (`Reservation_id` , `Reservation_Customer_id`)
    REFERENCES `mydb`.`Reservation` (`id` , `Customer_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Room_Hotel1`
    FOREIGN KEY (`Hotel_id`)
    REFERENCES `mydb`.`Hotel` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

```

**简单叙说 数据库逻辑模型 与 领域模型 的异同**  
- 异：  
领域模型是对领域内的概念类或现实世界的对象的一种抽象的可视化表示，并建立领域概念之间的关系。
而数据库逻辑模型虽然也会建立领域概念（数据表）之间的关系，但它更在意实际有用的关系  

另外数据库逻辑模型也更具体，需要给出字段类型  
  
- 同：  
都是在定义领域概念，并且建立关系

